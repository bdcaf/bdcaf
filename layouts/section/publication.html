{{ partial "header.html" . }}
{{ partial "navbar.html" . }}
{{ partial "header_image.html" . }}
<h1>{{ .Title | default (i18n "publications") }}</h1>
{{ with .Content }}
<div class="article-style" itemprop="articleBody">{{ . }}</div>
{{ end }}
<p>
{{ i18n "filter_by_type" }}:
<select class="pub-filters-select">
  <option value="*">{{ i18n "filter_all" }}</option>
  {{ range $index, $taxonomy := .Site.Taxonomies.publication_types }}
  <option value=".pubtype-{{ (int $index) }}">
  {{ index $.Site.Params.publication_types (int $index) }}
  </option>
  {{ end }}
</select>
</p>

<div id="container-publications">
  {{ range .Pages.ByDate.Reverse }}
  {{ if .Params.publication_types }}
  {{ $.Scratch.Set "pubtype" (index .Params.publication_types 0) }}
  {{ else }}
  {{ $.Scratch.Set "pubtype" 0 }}
  {{ end }}

  <div class="pubtype-{{ $.Scratch.Get "pubtype" }}">
    <h2>{{ .Title }}</h2>
    <p>{{ partial "publication_links" (dict "content" . "is_list" 1) }}</p> 
  </div>
  {{ end }}
</div>

{{ partial "footer_container.html" . }}
{{ partial "footer.html" . }}
