{{- define "main" -}}
<article class="article" itemscope itemtype="http://schema.org/Article">
  <div class="article-container">
    <h1 itemprop="name">{{- .Title -}}</h1>
    {{- partial "article_metadata" (dict "content" . "is_list" 0) -}}
    <div class="article-style" itemprop="articleBody">
      {{- .Content -}}
    </div>

    <ul class = 'resources'>
      {{- range .Resources -}}
      <li>
	{{ if eq .ResourceType "mp4" }}
	<video controls src="{{- .RelPermalink -}}"></video>
	{{ else if eq .ResourceType "image" }}
	<img src="{{- .RelPermalink -}}" alt="{{ .ResourceType | title }}" >
	{{ else }}
	<a href="{{ .RelPermalink }}">{{ .ResourceType | title }}</a>
	{{ end }}
      </li>
      {{- end -}}
    </ul>

  </div>
</article>

<div class="continue">
  {{- $related := .Site.RegularPages.Related . | first 5 -}}
  {{- with $related -}}
  <h3>See Also</h3>
  <ul>
    {{- range . -}}
    <li><a href="{{ .RelPermalink }}">{{- .Title -}}</a></li>
    {{- end -}}
  </ul>
  {{- end -}}
  <a href="{{ ref . "/post" }}">all posts</a>
</div>

{{- end -}}
