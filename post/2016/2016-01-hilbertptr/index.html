<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.7.0"><meta name=author content="Clemens Ager"><meta name=description content="I saw some 
nice visualiztion for IP
adresses
which made use of the hilbert curve for mapping sequatial data into an
area. This has the nice benefit of assuring numbers that are close to
each other stay close in two dimensions as well.  Unfortunately the
opposite does not hold.  Conveniently a function to produce a hilbert
curve is provided via

HilbertVis
on bioconductor."><link rel=alternate hreflang=en-us href=/post/2016/2016-01-hilbertptr/><meta name=theme-color content="#A30000"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400%7COswald:400%7CRaleway%7CMontserrat:600&display=swap"><link rel=stylesheet href=/css/academic.css><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png><link rel=canonical href=/post/2016/2016-01-hilbertptr/><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@c_decaf"><meta property="twitter:creator" content="@c_decaf"><meta property="og:site_name" content="bdcaf"><meta property="og:url" content="/post/2016/2016-01-hilbertptr/"><meta property="og:title" content="Mass spectra visualization | bdcaf"><meta property="og:description" content="I saw some 
nice visualiztion for IP
adresses
which made use of the hilbert curve for mapping sequatial data into an
area. This has the nice benefit of assuring numbers that are close to
each other stay close in two dimensions as well.  Unfortunately the
opposite does not hold.  Conveniently a function to produce a hilbert
curve is provided via

HilbertVis
on bioconductor."><meta property="og:image" content="img/map[gravatar:%!s(bool=false) shape:circle]"><meta property="twitter:image" content="img/map[gravatar:%!s(bool=false) shape:circle]"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2016-03-30T00:00:00+00:00"><meta property="article:modified_time" content="2019-03-06T11:25:03+01:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/post/2016/2016-01-hilbertptr/"},"headline":"Mass spectra visualization","datePublished":"2016-03-30T00:00:00Z","dateModified":"2019-03-06T11:25:03+01:00","author":{"@type":"Person","name":"Clemens Ager"},"publisher":{"@type":"Organization","name":"bdcaf","logo":{"@type":"ImageObject","url":"/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"}},"description":"\u003cp\u003eI saw some \n\u003ca href=\"http://datadrivensecurity.info/blog/posts/2015/Jan/mapping-ipv4-address-in-hilbert-space/\" target=\"_blank\" rel=\"noopener\"\u003enice visualiztion for IP\nadresses\u003c/a\u003e\nwhich made use of the hilbert curve for mapping sequatial data into an\narea. This has the nice benefit of assuring numbers that are close to\neach other stay close in two dimensions as well.  Unfortunately the\nopposite does not hold.  Conveniently a function to produce a hilbert\ncurve is provided via\n\n\u003ca href=\"https://bioconductor.org/packages/release/bioc/html/HilbertVis.html\" target=\"_blank\" rel=\"noopener\"\u003eHilbertVis\u003c/a\u003e\non bioconductor.\u003c/p\u003e"}</script><title>Mass spectra visualization | bdcaf</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>bdcaf</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>bdcaf</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#featured><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"></ul></div></nav><article class=article><div class="article-container pt-3"><h1>Mass spectra visualization</h1><div class=article-metadata><span class=article-date>Last updated on
2019-03-06</span>
<span class=middot-divider></span><span class=article-reading-time>3 min read</span></div></div><div class=article-container><div class=article-style><p>I saw some
<a href=http://datadrivensecurity.info/blog/posts/2015/Jan/mapping-ipv4-address-in-hilbert-space/ target=_blank rel=noopener>nice visualiztion for IP
adresses</a>
which made use of the hilbert curve for mapping sequatial data into an
area. This has the nice benefit of assuring numbers that are close to
each other stay close in two dimensions as well. Unfortunately the
opposite does not hold. Conveniently a function to produce a hilbert
curve is provided via
<a href=https://bioconductor.org/packages/release/bioc/html/HilbertVis.html target=_blank rel=noopener>HilbertVis</a>
on bioconductor.</p><h3 id=ptr-ms-spectra>PTR-MS spectra</h3><p>I have been playing with PTR-MS data for some while. It&rsquo;s always hard to
visualize this datasets. There are some nice patterns showing up - isotopic and
due to hydratization.</p><h3 id=data>data</h3><p>I will not show out reading out the data - it was collected using a Ionicon PTR-TOF MS
which requires tedious preprocessing - most of which I can finally do in R but
the code is poorly documented so far. The measurment is actually from a proband
who took a sip of ethanol a few minutes before measurement.</p><p>Just a glimpse of it looks like this:</p><table><thead><tr><th>mass</th><th>counts</th></tr></thead><tbody><tr><td>21</td><td>142720</td></tr><tr><td>22</td><td>18708</td></tr><tr><td>23</td><td>8148</td></tr><tr><td>24</td><td>7137</td></tr><tr><td>25</td><td>6711</td></tr><tr><td>26</td><td>6468</td></tr></tbody></table><h2 id=experiments>Experiments</h2><p>Since over m/z 100 there is only sparse signal I created the relevant Hilbert
curve doing</p><h3 id=curves>Curves</h3><p>The first plot uses scales the area of the dots at the masses to the observed counts.</p><p><img src=/~c1891011/photo/2016-01-hilbertPTR_fig/2016-01-hilbertPTR_firsttry-1.png alt="plot of chunk first try"></p><p>This plot shows a little structure - the main blocks are of 16 numbers.</p><ul><li>The numbers 1 to 16 are basically zero as there are no protonated ions at such masses.</li><li>The next block contains the major precursors - the hydronium ion
\(H_3O^+\) with its isotopes at m/z 19 to 21, \(NO^+\) at 30 and
\(O_2^+\) at 32. A little visible is ammonia at m/z 18.</li><li>The block from 33 to 48 contains the Zundel ion (\(H_2O \cdot
H_3O^+\) ) as well as ethanol at 47 (with some isotops at 48) and its
metabolite acetaldehyde at 45.</li><li>Following block contains the important compound acetone at 59 and
not visible the next metabolite of ethanol acetic acid at 61.</li><li>Next block contains isoprene at 69 as well as hydrated ethanol ion at 65.</li><li>The following blocks show no visible ions although at aromatics like toluene (m/z 93) should show up there.</li></ul><p>Unfortunately when observed on the PTR-TOF it can be seen that the signal is
saturated at m/z 19, 37 and 47. So lets scale down the max signal.<br>The concentration of the observed compounds is in the ppm&rsquo;s.
<img src=/~c1891011/photo/2016-01-hilbertPTR_fig/2016-01-hilbertPTR_scaledin-1.png alt="plot of chunk scaled in"></p><p>Finally we see a little more. But still only compounds that occur in<br>concentrations of several ppbs.</p><p>Lets try to use logarithmic scale instead.</p><p><img src=/~c1891011/photo/2016-01-hilbertPTR_fig/2016-01-hilbertPTR_logscale-1.png alt="plot of chunk log scale"></p><p>Now the plot shows many more compounds. All the main ions are tailed by some ions of their isotopes. Though it is still hard to see where some traces occur. I experimentd with some zooming but overall there was little benefit to it. My next try will be to see if I can create an animated version of this to follow a volunteers breath pattern.</p><p>The code for this page was written in <code>R</code>. I will keep investigating and probably put a link to the git repo online once it reaches a more mature state.</p></div><div class=article-tags><a class="badge badge-light" href=/tags/science/>science</a>
<a class="badge badge-light" href=/tags/visualisation/>visualisation</a></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=/post/2016/2016-01-hilbertptr/&text=Mass%20spectra%20visualization" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=/post/2016/2016-01-hilbertptr/&t=Mass%20spectra%20visualization" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=Mass%20spectra%20visualization&body=/post/2016/2016-01-hilbertptr/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=/post/2016/2016-01-hilbertptr/&title=Mass%20spectra%20visualization" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="https://web.whatsapp.com/send?text=Mass%20spectra%20visualization%20/post/2016/2016-01-hilbertptr/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=/post/2016/2016-01-hilbertptr/&title=Mass%20spectra%20visualization" target=_blank rel=noopener class=share-btn-weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="media author-card content-widget-hr"><img class="avatar mr-3 avatar-circle" src=/authors/admin/avatar_hu9b04e5b7aa4cd09e8b079a3c235fbdb8_199807_270x270_fill_lanczos_center_2.png alt=Avatar><div class=media-body><h5 class=card-title><a href=/>Clemens Ager</a></h5><h6 class=card-subtitle>Number Cruncher</h6><ul class=network-icon aria-hidden=true><li><a href=/#contact><i class="fas fa-envelope"></i></a></li><li><a href=https://twitter.com/c_decaf target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href="https://scholar.google.co.uk/citations?user=Agq35HgAAAAJ" target=_blank rel=noopener><i class="ai ai-google-scholar"></i></a></li><li><a href=https://github.com/bdcaf target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=https://at.linkedin.com/in/clemens-ager-1228a295 target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li></ul></div></div><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/publication/filipiak-2016/>A Compendium of Volatile Organic Compounds (VOCs) Released By Human Cell Lines</a></li><li><a href=/publication/ager-2016/>Using the three compartment model for isoprene observations</a></li><li><a href=/post/2016/2016-12-31_update/>Alles auf neuem Stand</a></li><li><a href=/post/2016/2016-12-29_datapoint/>A Datapoint walks into a bar</a></li><li><a href=/post/2016/2016-12-23-phd/>Xmas Bingo</a></li></ul></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script><script>const code_highlighting=true;</script><script>const isSiteThemeDark=false;</script><script src=/js/academic.min.c97b94000ee75a76d9bc08f5a2e44814.js></script><div class=container><footer class=site-footer><p class=powered-by>Clemens Ager 2020 &#183;
Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>