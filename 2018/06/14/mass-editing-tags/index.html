<!DOCTYPE html><html lang="en-uk"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="generator" content="Hugo 0.54.0" /><meta name="author" content="Clemens Ager"><meta name="description" content="Number Cruncher // PhD Candidate // Physicist"><script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat|Raleway:100,400" rel="stylesheet"><link rel="stylesheet" href="https://bdcaf.github.io/style.f30cf7fa5b8e98d3ae0f12682c0010226eb5ef255409a0b535baea9b3a57f34344d34e8e33fd220b3dba02e4fb4f023c889eb8baf80743a85fec9e4a9239ebc8.css" 
		       integrity="sha512-8wz3&#43;luOmNOuDxJoLAAQIm617yVUCaC1NbrqmzpX80NE006OM/0iCz26AuT7TwI8iJ64uvgHQ6hf7J5KkjnryA==">
<link rel="alternate" href="https://bdcaf.github.io/index.xml" type="application/rss+xml" title="C. Ager">
<link rel="feed" href="https://bdcaf.github.io/index.xml" type="application/rss+xml" title="C. Ager">
<link rel="canonical" href="https://bdcaf.github.io/2018/06/14/mass-editing-tags/">
  <title>Mass editing tags|C. Ager</title>
</head>
<body id="top">
<header>
    <h1 class="logo"> <a href="https://bdcaf.github.io/">clemens<b>ager</b></a></h1>
  <div class="container">
    <a href="#main-menu" role="button" id="main-menu-toggle" class="menu-toggle" aria-expanded="false" aria-controls="main-menu" aria-label="Open main menu">
      <span class="sr-only">Open main menu</span>
      <span aria-hidden="true"> <i class="fas fa-bars"></i> </span>
    </a>
    <nav id="main-menu" role="navigation" class="main-menu" aria-expanded="false" aria-label="Main menu">
      <a href="#main-menu-toggle" role="button" id="main-menu-close" class="menu-close" aria-expanded="false" aria-controls="main-menu" aria-label="Close main menu"> 
	<span class="sr-only">Close main menu</span>
	<span aria-hidden="true">
	  <i class="fas fa-window-close"></i>
	</span> </a> 
	<ul><li>
          <a href="https://bdcaf.github.io/#about"><span>About</span> </a>
        </li><li>
          <a href="https://bdcaf.github.io/#posts"><span>Posts</span> </a>
        </li><li>
          <a href="https://bdcaf.github.io/#publications_selected"><span>Publications</span> </a>
        </li><li>
          <a href="https://bdcaf.github.io/#projects"><span>Projects</span> </a>
        </li><li>
          <a href="https://bdcaf.github.io/#contact"><span>Contact</span> </a>
        </li></ul>
    </nav>
    <a href="#main-menu-toggle"
       class="backdrop"
       tabindex="-1"
       aria-hidden="true" hidden></a>
  </div>
</header>
<article class="article" itemscope itemtype="http://schema.org/Article">
<div class="article-container">
    <h1 itemprop="name">Mass editing tags</h1><div class="article-metadata">
  <span class="article-date">
    <time datetime="2018-06-14 08:42:28 &#43;0200 CEST" itemprop="datePublished">2018-06-14</time>
  </span><span class="article-categories">
    <i class="fa fa-folder"> </i>
    <a href="https://bdcaf.github.io/categories/site">site</a>, <a href="https://bdcaf.github.io/categories/dev">dev</a></span><span class="article-tags">
    <i class="fa fa-tags"> </i>
    <a href="https://bdcaf.github.io/tags/script">script</a
    ></span></div>
<div class="article-style" itemprop="articleBody"><p>Having read some about the
<a href="https://github.com/rstudio/blogdown" target="_blank">blogdown</a> package I thought I
could cleanup my site some more.</p>

<p>I came up with some scripts to clean up tags.</p>

<p>Within R I could use some of the new functionality.</p>

<pre><code>a &lt;- blogdown:::collect_yaml()
</code></pre>

<p>would give me a nice list of my categories and tags.</p>

<p>First I would check how many files would use the offending
tags.  I use <a href="https://github.com/BurntSushi/ripgrep" target="_blank">ripgrep</a> for my
searches.  To avoid replacements inside text I chose to use a regexp
as search expression.  In my case that avoided all collisions.</p>

<pre><code>rg '^- offending'
</code></pre>

<p>Then if it&rsquo;s just one or two I can edit them. Just a warning I use
fish and neovim - so adjust accordingly.</p>

<pre><code>nvim (rg '^- offending')
</code></pre>

<p>To correct spelling I did replacements like this:</p>

<pre><code>rg '^\W*- maths$' --files-with-matches | xargs sed -i '' 's/^\( *- *\) maths$/\1math/g'
</code></pre>

<p>annoyingly macs <code>sed</code> did not support the <code>\s</code> pattern.</p>

<p>Fully removing a tag was done so:</p>

<pre><code>rg '^- Allgemein' --files-with-matches | xargs sed -i '' '/^- Allgemein/d'
</code></pre>

<p>I think soon I will move stuff in subfolders.  For now this shouldn&rsquo;t
be problematic as there are almost no files in the data folder.  Also
I still have unresolved links to images in the old imports.  But
that&rsquo;s for another day.</p>

<h3 id="trouble-shooting">trouble shooting</h3>

<p>I soon ended up having errors about empty section lists.
Unfortunately it turned out too many.  And ripgrep wouldn&rsquo;t match
multiline patterns.  So time to also use the (slower) <a href="https://github.com/ggreer/the_silver_searcher" target="_blank">silver searcher</a>.</p>

<pre><code>ag -l &quot;^categories:\n--&quot; | xargs sed -i -e '/^categories:/d'
ag -l &quot;^categories:\n[^ -]&quot; | xargs sed -i -e '/^categories:/d'
</code></pre>

<p>would delete the empty categories.</p>

<h4 id="cases">cases&hellip;</h4>

<p>It was a bit tricky as the page of tags showed them all in lower case - and I could locate them nicely using <code>rg -i</code> - however mac os <code>sed</code>
  was not able to ignore cases in patterns.</p></div>
  </div>
</article><nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://bdcaf.github.io/2018/06/04/math-acrobatics/"><span
      aria-hidden="true">&larr;</span> Math Acrobatics</a></li>
    
    <li class="next"><a href="https://bdcaf.github.io/2018/06/29/abandonware/">Abandonware <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>
<footer class="site-footer">
    <p class="powered-by">Clemens Ager, Brixlegg &middot;Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>.
    &middot;
    <a href="https://bdcaf.github.io/index.xml">RSS <i class="fas fa-rss-square"></i></a>
    </p>
</footer>
  </body>
</html>
